<!DOCTYPE html>
<html>
<head>
    <title>Success Page</title>
</head>
<body>
    <h1>Welcome, {{ username }}!</h1>

    <h2>Your Information</h2>
    <p>User ID: {{ user_id }}</p>
    <p>Role: {{ user_role }}</p>

    <h2>Explore Services</h2>
    <form method="GET" action="{% url 'main:home' %}">
        <label for="categoryFilter">Filter by Category:</label>
        <select id="categoryFilter" name="category" onchange="this.form.submit()">
            <option value="">All Categories</option>
            {% for category in categories %}
                <option value="{{ category.id }}" {% if category.id|stringformat:"s" == request.GET.category %}selected{% endif %}>
                    {{ category.name }}
                </option>
            {% endfor %}
        </select>
        <br>
        <label for="searchInput">Search:</label>
        <input type="text" id="searchInput" name="search" value="{{ search_term }}" placeholder="Search categories...">
        <button type="submit">Search</button>
    </form>

    <h3>Service Categories</h3>
    <ul>
        {% for category in categories %}
            <li>
                <strong>{{ category.name }}</strong>
                <ul>
                    {% for subcategory in category.subcategories.all %}
                        <li>
                            <a href="{% url 'main:subcategory_detail' subcategory.id %}">{{ subcategory.name }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
</body>
</html>
